{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "A simple pie chart with labels.",
  "data": {
    "values": "empty"
  },
  "encoding": {
    "theta": { "field": "amount", "type": "quantitative", "stack": true },
    "color": { "field": "category", "type": "nominal", "legend": null, "scale": {"domain": ["gold", "silver"], "range": ["#F1C40F", "#95A5A6"]}},
    "tooltip": [
      { "field": "category", "type": "nominal", "title": "Category (FOR)" },
      { "field": "value", "type": "quantitative", "format": ".1p", "title": "Share of publications"},
      { "field": "amount", "type": "quantitative", "title": "Number of publications"}
    ]
  },
  "layer": [
    {
      "mark": {
        "type": "arc",
        "outerRadius": 200
      }
    },
    {
      "mark": { "type": "text", "radius": 215 },
      "encoding": {
        "text": {
          "field": "value",
          "type": "quantitative",
          "format": ".1p",
          "condition": {
            "test": "datum['value'] < 0.01", "value":""
          }
        }
      }
    }
  ],
  "background": null
}
